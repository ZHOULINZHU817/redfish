{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zlz/Desktop/gooci/redfish/pages/order_modules/refund/apply/main.vue?a3a4","webpack:////Users/zlz/Desktop/gooci/redfish/pages/order_modules/refund/apply/main.vue?dea3","webpack:////Users/zlz/Desktop/gooci/redfish/pages/order_modules/refund/apply/main.vue?9605","webpack:////Users/zlz/Desktop/gooci/redfish/pages/order_modules/refund/apply/main.vue?5d16","uni-app:///pages/order_modules/refund/apply/main.vue","webpack:////Users/zlz/Desktop/gooci/redfish/pages/order_modules/refund/apply/main.vue?3ef9","webpack:////Users/zlz/Desktop/gooci/redfish/pages/order_modules/refund/apply/main.vue?db29"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,gH;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAg2B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyFp3B;AACA;AACA,mE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2UAEA;eACA,EACA,IADA,kBACA,CACA,SACA,cADA,EAEA,cAFA,EAGA,gBAHA,EAIA,SAJA,EAKA,iBALA,EAKA;AACA,oBANA,EAMA;AACA,iBAPA,EAQA,SARA,EASA,kBATA,EAUA,aAVA,EAUA;AACA,oBAXA,EAWA;AACA,mBAZA,EAaA,SAbA,EAcA,SAdA,EAeA,UAfA,EAeA;AACA,uBAhBA,EAiBA,uBAjBA,EAkBA,2BAlBA,EAmBA,yFAnBA,EAoBA,cApBA,CAoBA;AApBA,MAsBA,CAxBA,EAyBA,cACA,0BADA,CAEA;AAFA,GAzBA,EA6BA,MA7BA,oBA6BA,CACA,oDACA,2BACA,yCADA,IAGA,2BACA,qBADA,EACA;AACA,kDAFA,IAIA,0CACA,CAvCA,EAwCA,YACA,SADA,uBACA,CACA;AACA,qEACA,CAJA,EAxCA,EA8CA,OA9CA,qBA8CA,kBACA,6CACA,wCACA,oCACA,gCACA,CACA,CAJA,EAKA,gBACA,kCACA,uCACA,iEACA,qBACA,CAFA,MAEA,CACA,wBACA,CACA,0EACA,uEACA,oEACA,wEACA,wBACA,sCACA,CAFA,EAGA,CAJA,EAKA,CArEA,EAsEA,SACA,cADA,0BACA,GADA,EACA,CACA,wCACA,CAHA,EAtEA,EA2EA,WACA,gBADA,4BACA,CADA,EACA,CACA,sDACA,CAHA,EAIA,iBAJA,6BAIA,CAJA,EAIA,CACA,gEACA,4BACA,wBACA,CAFA,MAEA,CACA,wBACA,CACA,CAXA,EAYA,WAZA,uBAYA,CAZA,EAYA,CACA,UADA,CACA;AACA,sBACA,YAHA,CAGA;AACA,mBAJA,CAIA;AACA,uBALA,CAKA;AACA,oCACA,yBACA,CACA,iBACA,UADA,EACA;AACA,4CAFA,EAEA;AACA,uCAHA,EAGA;AACA,wCACA,iCACA;AACA;;;AAGA;AACA,2BADA;;AAGA;AACA,iDAVA,CAUA;AACA,SAfA;AAgBA;AACA;AACA,SAlBA;AAmBA;AACA;AACA,SArBA;;AAuBA,KA5CA;AA6CA,UA7CA,kBA6CA,OA7CA,EA6CA,CA7CA,EA6CA,QA7CA,EA6CA;AACA;AACA;AACA;AACA;AACA,2DADA;AAEA,4BAFA;AAGA,oBAHA;AAIA;AACA,qBADA,EAJA;;AAOA;AACA,+CADA;AAEA,yFAFA;AAGA,qDAHA,EAPA;;AAYA;AACA;AACA;AACA,SAfA;AAgBA;AACA;AACA;AACA;AACA;AACA,6BAFA;AAGA,6BAHA;AAIA,6CAJA;;AAMA,SAzBA;AA0BA;AACA;AACA;AACA,6BADA,CACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SAjCA;;AAmCA,KApFA;AAqFA,UArFA,kBAqFA,KArFA,EAqFA;AACA;AACA;AACA,KAxFA;AAyFA,YAzFA,oBAyFA,KAzFA,EAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhGA;AAiGA,OAjGA,eAiGA,KAjGA,EAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxGA;AAyGA,aAzGA,uBAyGA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,yDADA;AAEA,+CAFA;AAGA,iDAHA;AAIA,mDAJA,EADA,CADA;;;AASA,qDATA;AAUA,wCAVA;AAWA,kCAXA;AAYA,iCAZA;AAaA,0CAbA;AAcA,mCAdA;;AAgBA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,WAPA;AAQA;AACA,OAnBA,MAmBA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,WAPA;AAQA;AACA;AACA,KAnKA,EA3EA,E;;;;;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AAA+kD,CAAgB,05CAAG,EAAC,C;;;;;;;;;;;ACAnmD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order_modules/refund/apply/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order_modules/refund/apply/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=9f7141e2&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=9f7141e2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9f7141e2\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order_modules/refund/apply/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=9f7141e2&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"afterApply\">\r\n\t\t<commonHeader :title=\"title\" :leftIcon=\"leftIcon\" :rightIcon=\"rightIcon\" />\r\n\t\t<div class=\"afterApply-box\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<a>\r\n\t\t\t\t\t\t<div class=\"list-img\"><img :src=\"items.dataPic\" /></div>\r\n\t\t\t\t\t\t<div class=\"list-r\">\r\n\t\t\t\t\t\t\t<div class=\"list-con\">\r\n\t\t\t\t\t\t\t\t<p>{{ items.goodsName }}</p>\r\n\t\t\t\t\t\t\t\t<div>{{ unitPrice.obpay }}{{ items.pricesetNprice }}{{ unitPrice.mapay }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h3>{{ items.skuName }}</h3>\r\n\t\t\t\t\t\t\t<div class=\"list-add\">\r\n\t\t\t\t\t\t\t\t<div @click=\"subtract(items)\"><i class=\"iconfont\">&#xe755;</i></div>\r\n\t\t\t\t\t\t\t\t<div><input type=\"text\" v-model=\"items.goodsCamount\" disabled /></div>\r\n\t\t\t\t\t\t\t\t<div @click=\"add(items)\"><i class=\"iconfont\">&#xe756;</i></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class=\"afterApply-con\" v-if=\"items.dataState == '3' || items.dataState == '4'\">\r\n\t\t\t<div>\r\n\t\t\t\t类型\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<picker @change=\"afterPickerChange\" :value=\"index\" :range=\"afterArray\" mode=\"selector\">\r\n\t\t\t\t\t\t<view class=\"picker\">{{ afterPickerValue }}</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t\t<!-- <picker :mode=\"selector\" :option=\"array\" @change-option=\"changeOption\"/> -->\r\n\t\t\t\t\t<i class=\"iconfont\">&#xe61d;</i>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"afterApply-con\">\r\n\t\t\t<div>\r\n\t\t\t\t退款原因\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<picker @change=\"bindPickerChange\" :value=\"index\" :range=\"array\" mode=\"selector\">\r\n\t\t\t\t\t\t<view class=\"picker\">{{ pickerValue }}</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t\t<!-- <picker :mode=\"selector\" :option=\"array\" @change-option=\"changeOption\"/> -->\r\n\t\t\t\t\t<i class=\"iconfont\">&#xe61d;</i>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"afterApply-con\">\r\n\t\t\t<div>\r\n\t\t\t\t退款金额\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<input v-model=\"pricesetNprice\" :style=\"{ color: baseColor }\" />\r\n\t\t\t\t\t{{ unitPrice.mapay }}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"afterApply-textarea\">\r\n\t\t\t<p>详细描述：</p>\r\n\t\t\t<textarea placeholder=\"请描述您遇到的问题及详细的退换理由，不超过1000字\" v-model=\"refundMeo\"></textarea>\r\n\t\t</div>\r\n\t\t<div class=\"afterApply-img\">\r\n\t\t\t<h4>上传凭证</h4>\r\n\t\t\t<div class=\"apply-img-box\">\r\n\t\t\t\t<dl class=\"show-apply-img\">\r\n\t\t\t\t\t<dd v-for=\"(item, index) in upImg\" :key=\"index\">\r\n\t\t\t\t\t\t<div class=\"dd-img\">\r\n\t\t\t\t\t\t\t<i class=\"iconfont\" @click=\"delImg(index)\">&#xe600;</i>\r\n\t\t\t\t\t\t\t<img :src=\"item\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</dd>\r\n\t\t\t\t\t<dd v-show=\"upImgLength\">\r\n\t\t\t\t\t\t<form action class=\"apply-up-img\">\r\n\t\t\t\t\t\t\t<div class=\"weui-uploader__input-box\">\r\n\t\t\t\t\t\t\t\t<div class=\"weui-uploader__input\" @click=\"chooseImage\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe620;</i>\r\n\t\t\t\t\t\t\t\t\t<p>上传凭证</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</dd>\r\n\t\t\t\t</dl>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"afterApply-btn\" @click=\"submitBtn\" :style=\"{ background: baseColor }\">提交</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport http from '@/api/http.js';\r\nimport { $storage, $router, $message } from '@/utils/prototype/vue.js';\r\nimport { refund } from '@/api/interface.js';\r\nimport commonHeader from '@/components/communal/commonHeader';\r\n// import picker from '@/components/communal/picker';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitle: '申请退换货',\r\n\t\t\tleftIcon: true,\r\n\t\t\trightIcon: false,\r\n\t\t\titems: {},\r\n\t\t\tpricesetNprice: 0, //退款总金额\r\n\t\t\tbeforePrice: 0, // 退款原始金额\r\n\t\t\tnewPrice: 0,\r\n\t\t\tarray: [],\r\n\t\t\tpickerValue: '请选择',\r\n\t\t\trefundMeo: '', //描述\r\n\t\t\trefundType: '', //退款类型B01仅退款，B02退货退款\r\n\t\t\tbaseColor: '',\r\n\t\t\tupImg: [],\r\n\t\t\tfiles: [],\r\n\t\t\tsumCont: 1, //该商品的购买数量\r\n\t\t\tupImgLength: true,\r\n\t\t\tafterPickerValue: '请选择',\r\n\t\t\tafterArray: ['仅退款', '退货退款'],\r\n\t\t\tuserImgurl: require('../../../../static/img/mine/default_header.png'),\r\n\t\t\tmenuJspath: '' //退货详情列表\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tcommonHeader\r\n\t\t// picker\r\n\t},\r\n\tonLoad() {\r\n\t\tconsole.log(this.$root.$mp.query, '参数212111111111');\r\n\t\twx.setNavigationBarTitle({\r\n\t\t\ttitle: $storage.get('proappEnvName')\r\n\t\t});\r\n\t\twx.setNavigationBarColor({\r\n\t\t\tfrontColor: '#ffffff', // 必写项\r\n\t\t\tbackgroundColor: '#' + this.$state.baseColor\r\n\t\t});\r\n\t\tObject.assign(this, this.$options.data());\r\n\t},\r\n\tcomputed: {\r\n\t\tunitPrice() {\r\n\t\t\t// mapay 主单位（后面）  mbpay 主单位（前面）  obpay 辅单位（前面）   oapay 辅单位（后面）\r\n\t\t\treturn this.$state.unitPrice || $storage.get('unitPrice');\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.baseColor = '#' + this.$state.baseColor;\r\n\t\tthis.$state.orderMenu.map(v => {\r\n\t\t\tif (v.menuAction == 'refundInfor') {\r\n\t\t\t\tthis.menuJspath = v.menuJspath;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.array = [];\r\n\t\tthis.items = this.$root.$mp.query;\r\n\t\tthis.sumCont = this.items.goodsCamount;\r\n\t\tif (this.items.dataState == '3' || this.items.dataState == '4') {\r\n\t\t\tthis.refundType = '';\r\n\t\t} else {\r\n\t\t\tthis.refundType = 'B01';\r\n\t\t}\r\n\t\tthis.pricesetNprice = this.items.pricesetNprice * this.items.goodsCamount;\r\n\t\tthis.beforePrice = this.items.pricesetNprice * this.items.goodsCamount;\r\n\t\tthis.newPrice = this.items.pricesetNprice * this.items.goodsCamount;\r\n\t\thttp.get(refund.queryRefCause).then(res => {\r\n\t\t\tres.map(val => {\r\n\t\t\t\tthis.array.push(val.flagSettingInfo);\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\twatch: {\r\n\t\tpricesetNprice(val) {\r\n\t\t\tconsole.log(this.pricesetNprice, 'val');\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tbindPickerChange(e) {\r\n\t\t\tthis.pickerValue = this.array[Number(e.target.value)];\r\n\t\t},\r\n\t\tafterPickerChange(e) {\r\n\t\t\tthis.afterPickerValue = this.afterArray[Number(e.target.value)];\r\n\t\t\tif (e.target.value == '1') {\r\n\t\t\t\tthis.refundType = 'B02';\r\n\t\t\t} else {\r\n\t\t\t\tthis.refundType = 'B01';\r\n\t\t\t}\r\n\t\t},\r\n\t\tchooseImage(e) {\r\n\t\t\tlet i = 0; // 多图上传时使用到的index\r\n\t\t\tlet that = this;\r\n\t\t\tlet max = 1; //最大选择数\r\n\t\t\tlet upLength; //图片数组长度\r\n\t\t\tlet imgFilePaths; //图片的本地临时文件路径列表\r\n\t\t\tif (that.upImg.length === 2) {\r\n\t\t\t\tthis.upImgLength = false;\r\n\t\t\t}\r\n\t\t\twx.chooseImage({\r\n\t\t\t\tcount: max, //一次最多可以选择的图片张数\r\n\t\t\t\tsizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\tsourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\timgFilePaths = res.tempFilePaths;\r\n\t\t\t\t\tupLength = imgFilePaths.length;\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 上传完成后把文件上传到服务器\r\n\t\t\t\t\t */\r\n\t\t\t\t\twx.showLoading({\r\n\t\t\t\t\t\ttitle: '上传中...'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(imgFilePaths, 'imgFilePaths');\r\n\t\t\t\t\tthat.upLoad(imgFilePaths, i, upLength); //上传操作\r\n\t\t\t\t},\r\n\t\t\t\tfail: function() {\r\n\t\t\t\t\tconsole.log('fail');\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\tconsole.log('commplete');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupLoad(imgPath, i, upLength) {\r\n\t\t\tconsole.log(getApp().globalData.saasAgent);\r\n\t\t\tlet that = this;\r\n\t\t\t//上传文件\r\n\t\t\twx.uploadFile({\r\n\t\t\t\turl: this.$domain + refund.uploadRefFile,\r\n\t\t\t\tfilePath: imgPath[i],\r\n\t\t\t\tname: 'file',\r\n\t\t\t\tformData: {\r\n\t\t\t\t\timgIndex: i\r\n\t\t\t\t},\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t\t'cookie': wx.getStorageSync('miniToken') + '=' + wx.getStorageSync('sessionid'),\r\n\t\t\t\t\t'saas-Agent': getApp().globalData.saasAgent\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t// 返回选定照片的本地文件路径列表，tempFilePath可以作为img标签的src属性显示图片\r\n\t\t\t\t\tthat.upImg.push(that.$domain + JSON.parse(res.data).fileUrl);\r\n\t\t\t\t},\r\n\t\t\t\tfail: function(res) {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\twx.hideLoading();\r\n\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\t//title: '提示',\r\n\t\t\t\t\t\tcontent: '上传图片失败',\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tsuccess: function(res) {}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\ti++;\r\n\t\t\t\t\tif (i == upLength) {\r\n\t\t\t\t\t\twx.hideLoading(); //上传结束，隐藏loading\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.upLoad(imgPath, i, upLength);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdelImg(index) {\r\n\t\t\tthis.upImg.splice(index, 1);\r\n\t\t\tthis.upImgLength = true;\r\n\t\t},\r\n\t\tsubtract(items) {\r\n\t\t\tlet goodsCamount = items.goodsCamount;\r\n\t\t\tif (goodsCamount > 1) {\r\n\t\t\t\titems.goodsCamount--;\r\n\t\t\t}\r\n\t\t\tthis.pricesetNprice = this.items.pricesetNprice * items.goodsCamount;\r\n\t\t\tthis.newPrice = this.items.pricesetNprice * items.goodsCamount;\r\n\t\t},\r\n\t\tadd(items) {\r\n\t\t\tlet goodsCamount = items.goodsCamount;\r\n\t\t\tif (goodsCamount < this.sumCont) {\r\n\t\t\t\titems.goodsCamount++;\r\n\t\t\t}\r\n\t\t\tthis.pricesetNprice = this.items.pricesetNprice * items.goodsCamount;\r\n\t\t\tthis.newPrice = this.items.pricesetNprice * items.goodsCamount;\r\n\t\t},\r\n\t\tsubmitBtn() {\r\n\t\t\tlet domainList = [];\r\n\t\t\tthis.upImg.map(val => {\r\n\t\t\t\tdomainList.push({ refundFileUrl: val });\r\n\t\t\t});\r\n\t\t\tlet fund = {\r\n\t\t\t\tocRefundGoodsBeanList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontractGoodsCode: this.items.contractGoodsCode,\r\n\t\t\t\t\t\tgoodsCamount: this.items.goodsCamount,\r\n\t\t\t\t\t\trefundGoodsNum: this.items.goodsCamount,\r\n\t\t\t\t\t\trefundGoodsAmt: this.items.pricesetNprice\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcontractBillcode: this.items.contractBillcode,\r\n\t\t\t\trefundMoney: this.pricesetNprice,\r\n\t\t\t\trefundEx: this.pickerValue,\r\n\t\t\t\trefundMeo: this.refundMeo,\r\n\t\t\t\tocRefundFileDomainList: domainList,\r\n\t\t\t\trefundType: this.refundType\r\n\t\t\t};\r\n\t\t\tif (this.items.dataState == '3' || this.items.dataState == '4') {\r\n\t\t\t\tif (!this.refundType) {\r\n\t\t\t\t\t$message.alert('请选择类型');\r\n\t\t\t\t} else if (this.pickerValue == '请选择') {\r\n\t\t\t\t\t$message.alert('请选择退款原因');\r\n\t\t\t\t} else if (this.pricesetNprice > this.newPrice) {\r\n\t\t\t\t\t$message.alert('退款金额不能大于退款商品总金额');\r\n\t\t\t\t} else if (!this.pricesetNprice) {\r\n\t\t\t\t\t$message.alert('退款金额不能为空');\r\n\t\t\t\t} else {\r\n\t\t\t\t\thttp.post(refund.saveRefund, { params: JSON.stringify(fund) }).then(res => {\r\n\t\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\t\tlet refundCode = JSON.parse(res.dataObj).code;\r\n\t\t\t\t\t\t\t$router.push(this.menuJspath, { refundCode: refundCode });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$message.alert(res.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.pickerValue == '请选择') {\r\n\t\t\t\t\t$message.alert('请选择退款原因');\r\n\t\t\t\t} else if (this.pricesetNprice > this.newPrice) {\r\n\t\t\t\t\t$message.alert('退款金额不能大于退款商品总金额');\r\n\t\t\t\t} else if (!this.pricesetNprice) {\r\n\t\t\t\t\t$message.alert('退款金额不能为空');\r\n\t\t\t\t} else {\r\n\t\t\t\t\thttp.post(refund.saveRefund, { params: JSON.stringify(fund) }).then(res => {\r\n\t\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\t\tlet refundCode = JSON.parse(res.dataObj).code;\r\n\t\t\t\t\t\t\t$router.replace(this.menuJspath, { refundCode: refundCode });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$message.alert(res.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '../../../../common/css/common.less';\r\n.afterApply {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: @white-color;\r\n\t&-box {\r\n\t\tmargin-top: 90rpx;\r\n\t\tborder-bottom: 20rpx solid #fafafa;\r\n\t\tul {\r\n\t\t\tli {\r\n\t\t\t\tpadding: 20rpx 30rpx;\r\n\t\t\t\t.tit {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\theight: 83rpx;\r\n\t\t\t\t\ti {\r\n\t\t\t\t\t\tmargin-right: 15rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tspan {\r\n\t\t\t\t\t\tcolor: @color-666;\r\n\t\t\t\t\t\tfont-size: @big-title;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ta {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t.list-img {\r\n\t\t\t\t\t\twidth: 112rpx;\r\n\t\t\t\t\t\theight: 112rpx;\r\n\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t\timg {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.list-r {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t.list-con {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\t\tp {\r\n\t\t\t\t\t\t\t\twidth: 380rpx;\r\n\t\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\t\tfont-size: @middle-title;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\th3 {\r\n\t\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t\t\tcolor: @color-999;\r\n\t\t\t\t\t\t\tmargin: 5rpx 0 0 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.list-add {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: flex-end;\r\n\t\t\t\t\t\t\tinput {\r\n\t\t\t\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdiv:last-child {\r\n\t\t\t\t\t\t\t\ti {\r\n\t\t\t\t\t\t\t\t\tfont-size: 42rpx;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t&-con {\r\n\t\tpadding: @padding-30;\r\n\t\tdiv {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\theight: 107rpx;\r\n\t\t\tborder-bottom: 1rpx solid #f6f6f8;\r\n\t\t\tp {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tspan {\r\n\t\t\t\t\tcolor: @color-999;\r\n\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\tinput {\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t&-textarea {\r\n\t\theight: 168rpx;\r\n\t\tpadding: @padding-30;\r\n\t\tborder-bottom: 1rpx solid #f6f6f8;\r\n\t\tp {\r\n\t\t\tmargin: 30rpx 0;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\t\ttextarea {\r\n\t\t\tfont-size: @big-title;\r\n\t\t\theight: 80rpx;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t}\r\n\t&-img {\r\n\t\th4 {\r\n\t\t\tmargin: 30rpx 0;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tpadding-left: 30rpx;\r\n\t\t}\r\n\t\t.apply-img-box {\r\n\t\t\t.show-apply-img {\r\n\t\t\t\tdd {\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\twidth: 154rpx;\r\n\t\t\t\t\theight: 154rpx;\r\n\t\t\t\t\tborder: 1rpx solid #f5f5f5;\r\n\t\t\t\t\tfloat: left;\r\n\t\t\t\t\tmargin: 0 20rpx 30rpx;\r\n\t\t\t\t\tbackground: #f5f5f5;\r\n\t\t\t\t\t.dd-img {\r\n\t\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\t\theight: 150rpx;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t.icon-delete {\r\n\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\tright: -15rpx;\r\n\t\t\t\t\t\t\ttop: -15rpx;\r\n\t\t\t\t\t\t\tz-index: 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\timg {\r\n\t\t\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\t\t\theight: 150rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tform {\r\n\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\theight: 150rpx;\r\n\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\tborder: 1px dashed #666;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\ti {\r\n\t\t\t\t\t\tfont-size: 57rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp {\r\n\t\t\t\t\t\tcolor: @color-999;\r\n\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput[type='file'] {\r\n\t\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\t\theight: 150rpx;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\topacity: 0;\r\n\t\t\t\t\t\ttop: 0;\r\n\t\t\t\t\t\tleft: 0;\r\n\t\t\t\t\t\tz-index: 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t&-btn {\r\n\t\theight: 98rpx;\r\n\t\tline-height: 98rpx;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t\t// background: #bfa676;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: @white-color;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 9999;\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=9f7141e2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=9f7141e2&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610694815650\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}