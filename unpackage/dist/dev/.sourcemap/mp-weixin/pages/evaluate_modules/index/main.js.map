{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zlz/Desktop/gooci/redfish/pages/evaluate_modules/index/main.vue?2104","webpack:////Users/zlz/Desktop/gooci/redfish/pages/evaluate_modules/index/main.vue?b113","webpack:////Users/zlz/Desktop/gooci/redfish/pages/evaluate_modules/index/main.vue?539e","webpack:////Users/zlz/Desktop/gooci/redfish/pages/evaluate_modules/index/main.vue?1573","uni-app:///pages/evaluate_modules/index/main.vue","webpack:////Users/zlz/Desktop/gooci/redfish/pages/evaluate_modules/index/main.vue?3336","webpack:////Users/zlz/Desktop/gooci/redfish/pages/evaluate_modules/index/main.vue?51ec"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4G;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAi1B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsDr2B;AACA;AACA;;AAEA,sE;AACA;AACA,MADA,kBACA;AACA;AACA,mBADA;AAEA,oBAFA;AAGA,sBAHA;AAIA,mBAJA;AAKA,eALA;AAMA,eANA;AAOA;AACA,8BARA,EAQA;AACA;AACA,2BAVA,EAUA;AACA,uBAXA;AAYA,2BAZA,EAYA;AACA,gBAbA;AAcA,eAdA,EAcA;AACA,4FAfA;AAgBA,kBAhBA,CAgBA;AAhBA;AAkBA,GApBA;AAqBA,QArBA,oBAqBA;AACA;AACA,+CADA;;AAGA;AACA,2BADA,EACA;AACA,kDAFA;;AAIA,GA7BA;AA8BA;AACA,8BADA,EA9BA;;AAiCA,SAjCA,qBAiCA;AACA;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA,KAXA;AAYA,GArDA;AAsDA;AACA,UADA,kBACA,KADA,EACA,UADA,EACA;AACA;AACA,SADA;AAEA,cAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA;AACA;AACA;AACA;AACA,OAJA;AAKA;AACA;AACA,KA/BA;AAgCA,eAhCA,uBAgCA,UAhCA,EAgCA;AACA,gBADA,CACA;AACA;AACA,kBAHA,CAGA;AACA,mBAJA,CAIA;AACA,uBALA,CAKA;;AAEA;AACA,kBADA,EACA;AACA,4CAFA,EAEA;AACA,uCAHA,EAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA,2BADA;;AAGA,6DATA,CASA;;AAEA;AACA,kBADA;AAEA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA;AACA,aAFA;AAGA;AACA;AACA,SAlCA;AAmCA;AACA;AACA,SArCA;AAsCA;AACA;AACA,SAxCA;;AA0CA,KAjFA;AAkFA,UAlFA,kBAkFA,OAlFA,EAkFA,CAlFA,EAkFA,QAlFA,EAkFA,UAlFA,EAkFA;AACA;AACA;AACA;AACA;AACA,2DADA;AAEA,4BAFA;AAGA,oBAHA;AAIA;AACA,qBADA,EAJA;;AAOA;AACA,+CADA;AAEA,uFAFA;AAGA,qDAHA,EAPA;;AAYA;AACA;AACA,kBADA;AAEA;AACA;AACA;AACA;AACA,WAFA;AAGA;;AAEA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA,WAFA;AAGA;AACA;AACA;AACA,SAjCA;AAkCA;AACA;AACA;AACA;AACA,6BAFA;AAGA,6BAHA;AAIA,6CAJA;;AAMA,SA1CA;AA2CA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SAlDA;;AAoDA,KA1IA;AA2IA,YA3IA,oBA2IA,KA3IA,EA2IA,UA3IA,EA2IA;AACA;AACA,cADA;AAEA;AACA;AACA;AACA;AACA,OAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA,OAFA;AAGA;AACA;AACA,KA3KA;AA4KA,aA5KA,uBA4KA;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDADA;AAEA,8CAFA;AAGA,8CAHA;AAIA,4CAJA;AAKA,4CALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OAPA,EAOA,IAPA,CAOA;AACA;AACA;AACA;;AAEA;AACA,cADA,CACA;AACA;AACA;AACA,WAJA;AAKA,cALA,CAKA;AACA;AACA;AACA,WARA;AASA,SAbA,MAaA;AACA;AACA;AACA,OAxBA;AAyBA,KA7NA,EAtDA,E;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAojD,CAAgB,05CAAG,EAAC,C;;;;;;;;;;;ACAxkD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/evaluate_modules/index/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/evaluate_modules/index/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=92bb8c4a&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=92bb8c4a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92bb8c4a\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/evaluate_modules/index/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=92bb8c4a&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"evaluateList\">\n\t\t<commonHeader :title=\"title\" :leftIcon=\"leftIcon\" :rightIcon=\"rightIcon\" />\n\t\t<ul v-for=\"(goods, goodsIndex) in query\" :key=\"goodsIndex\">\n\t\t\t<li class=\"evaluateList-img\">\n\t\t\t\t<img :src=\"goods.dataPic\" />\n\t\t\t\t<div>\n\t\t\t\t\t<h3>{{ templateTitle }}</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclass=\"iconfont\"\n\t\t\t\t\t\t\tv-for=\"(template, teIndex) in goods.evaluateScopeList\"\n\t\t\t\t\t\t\t:key=\"teIndex\"\n\t\t\t\t\t\t\t@click=\"iconShow(teIndex, goodsIndex)\"\n\t\t\t\t\t\t\t:style=\"{ color: template.baseColor ? baseColor : '' }\"\n\t\t\t\t\t\t\tref\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t&#xe610;\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<div class=\"evaluateList-text\">\n\t\t\t\t<textarea placeholder=\"宝贝满足您的期待吗？说说您的使用心得，分享给想买的他们吧!\" v-model=\"goods.evaluateGoodsContent\"></textarea>\n\t\t\t\t<div class=\"evaluateList-text-img\">\n\t\t\t\t\t<!-- <h4>上传凭证</h4> -->\n\t\t\t\t\t<div class=\"evaluateList-text-img-box\">\n\t\t\t\t\t\t<dl class=\"show-apply-img\">\n\t\t\t\t\t\t\t<dd v-for=\"(item, index) in goods.upImg\" :key=\"index\">\n\t\t\t\t\t\t\t\t<div class=\"dd-img\">\n\t\t\t\t\t\t\t\t\t<i class=\"iconfont\" @click=\"delImg(index, goodsIndex)\">&#xe600;</i>\n\t\t\t\t\t\t\t\t\t<img :src=\"item\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd v-show=\"goods.upImgLength\">\n\t\t\t\t\t\t\t\t<form action class=\"apply-up-img\">\n\t\t\t\t\t\t\t\t\t<div class=\"weui-uploader__input-box\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"weui-uploader__input\" @click=\"chooseImage(goodsIndex)\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe620;</i>\n\t\t\t\t\t\t\t\t\t\t\t<p>添加图片</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ul>\n\t\t<div class=\"evaluateList-addSubmit\" :style=\"{ background: baseColor, 'border-color': baseColor }\" @click=\"addSubmit\">提交</div>\n\t</div>\n</template>\n\n<script>\nimport http from '@/api/http.js';\nimport { $storage, $router, $message } from '@/utils/prototype/vue.js';\nimport { refund, queryUseTemplate, saveEvaluateGoods, saveEvaluateShop } from '@/api/interface.js';\nimport commonHeader from '@/components/communal/commonHeader';\nimport Vue from 'vue';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttitle: '发表评价',\n\t\t\tleftIcon: true,\n\t\t\trightIcon: false,\n\t\t\tbaseColor: '',\n\t\t\tupImg: [],\n\t\t\tfiles: [],\n\t\t\t//upImgLength:true,\n\t\t\tevaluateGoodsContent: '', //评价内容\n\t\t\t//templateValuesReList:[],//星\n\t\t\tevaluateScopeList: [], //星\n\t\t\ttemplateTitle: '',\n\t\t\tevaluateGoodsImgs: [], //提交图片的数组\n\t\t\tcurrent: 0,\n\t\t\tquery: [], //上个路由携带参数\n\t\t\tuserImgurl: require('../../../static/img/mine/default_header.png'),\n\t\t\torderUrl: '' //订单列表路径\n\t\t};\n\t},\n\tonLoad() {\n\t\twx.setNavigationBarTitle({\n\t\t\ttitle: $storage.get('proappEnvName')\n\t\t});\n\t\twx.setNavigationBarColor({\n\t\t\tfrontColor: '#ffffff', // 必写项\n\t\t\tbackgroundColor: '#' + this.$state.baseColor\n\t\t});\n\t},\n\tcomponents: {\n\t\tcommonHeader\n\t},\n\tmounted() {\n\t\tthis.baseColor = '#' + this.$state.baseColor;\n\t\tthis.$state.orderIndex.map(v => {\n\t\t\tif (v.menuAction == 'order') {\n\t\t\t\tthis.orderUrl = v.menuJspath;\n\t\t\t}\n\t\t});\n\t\tthis.query = this.$state.order;\n\t\thttp.post(queryUseTemplate, { applyTarget: 'goods' }).then(res => {\n\t\t\tthis.templateTitle = res[0].templateTitle;\n\t\t\tthis.evaluateScopeList = res[0].templateValuesReList;\n\t\t\tthis.query.map(val => {\n\t\t\t\tval.evaluateScopeList = res[0].templateValuesReList;\n\t\t\t\tval.upImgLength = true;\n\t\t\t\tval.upImg = [];\n\t\t\t\tval.evaluateGoodsImgs = [];\n\t\t\t});\n\t\t\tthis.$state.set('order', this.query);\n\t\t\t$storage.set('evaluateScopeList', this.query);\n\t\t});\n\t},\n\tmethods: {\n\t\tdelImg(index, goodsIndex) {\n\t\t\tlet attr,\n\t\t\t\tadd,\n\t\t\t\t_up = [];\n\t\t\tattr = [...$storage.get('evaluateScopeList')];\n\t\t\tlet evaled = [];\n\t\t\tlet upImg = [];\n\t\t\tattr.map(val => {\n\t\t\t\tevaled.push(val.upImgLength);\n\t\t\t\tupImg.push(val.upImg);\n\t\t\t});\n\t\t\tevaled[goodsIndex] = true;\n\t\t\tupImg[goodsIndex].splice(index, 1);\n\n\t\t\tadd = JSON.parse(JSON.stringify(evaled[goodsIndex]));\n\t\t\tevaled[goodsIndex] = add;\n\t\t\t_up = JSON.parse(JSON.stringify(upImg[goodsIndex]));\n\t\t\tupImg[goodsIndex] = _up;\n\t\t\tattr.map(val => {\n\t\t\t\tdelete val.upImgLength;\n\t\t\t\tdelete val.upImg;\n\t\t\t\tdelete val.evaluateGoodsImgs;\n\t\t\t});\n\t\t\tattr.map((val, k) => {\n\t\t\t\tval.upImgLength = evaled[k];\n\t\t\t\tval.upImg = upImg[k];\n\t\t\t\tval.evaluateGoodsImgs = upImg[k];\n\t\t\t});\n\t\t\tthis.query = attr;\n\t\t\t$storage.set('evaluateScopeList', this.query);\n\t\t},\n\t\tchooseImage(goodsIndex) {\n\t\t\tlet i = 0; // 多图上传时使用到的index\n\t\t\tlet that = this;\n\t\t\tlet max = 1; //最大选择数\n\t\t\tlet upLength; //图片数组长度\n\t\t\tlet imgFilePaths; //图片的本地临时文件路径列表\n\n\t\t\twx.chooseImage({\n\t\t\t\tcount: max, //一次最多可以选择的图片张数\n\t\t\t\tsizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\timgFilePaths = res.tempFilePaths;\n\t\t\t\t\tupLength = imgFilePaths.length;\n\t\t\t\t\t/**\n\t\t\t\t\t * 上传完成后把文件上传到服务器\n\t\t\t\t\t */\n\t\t\t\t\twx.showLoading({\n\t\t\t\t\t\ttitle: '上传中...'\n\t\t\t\t\t});\n\t\t\t\t\tthat.upLoad(imgFilePaths, i, upLength, goodsIndex); //上传操作\n\n\t\t\t\t\tlet attr,\n\t\t\t\t\t\tadd = [];\n\t\t\t\t\tattr = [...that.query];\n\t\t\t\t\tlet evaled = [];\n\t\t\t\t\tattr.map(val => {\n\t\t\t\t\t\tevaled.push(val.upImgLength);\n\t\t\t\t\t});\n\t\t\t\t\tif (that.query[goodsIndex].upImg.length === 4) {\n\t\t\t\t\t\tevaled[goodsIndex] = false;\n\t\t\t\t\t\tadd = JSON.parse(JSON.stringify(evaled[goodsIndex]));\n\t\t\t\t\t\tevaled[goodsIndex] = add;\n\t\t\t\t\t\tattr.map(val => {\n\t\t\t\t\t\t\tdelete val.upImgLength;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tattr.map((val, k) => {\n\t\t\t\t\t\t\tval.upImgLength = evaled[k];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthat.query = attr;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: function() {\n\t\t\t\t\tconsole.log('fail');\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tconsole.log('commplete');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupLoad(imgPath, i, upLength, goodsIndex) {\n\t\t\tconsole.log(imgPath[i]);\n\t\t\tlet that = this;\n\t\t\t//上传文件\n\t\t\twx.uploadFile({\n\t\t\t\turl: this.$domain + refund.uploadRefFile,\n\t\t\t\tfilePath: imgPath[i],\n\t\t\t\tname: 'file',\n\t\t\t\tformData: {\n\t\t\t\t\timgIndex: i\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\n\t\t\t\t\tcookie: wx.getStorageSync('miniToken') + '=' + wx.getStorageSync('sessionid'),\n\t\t\t\t\t'saas-Agent': getApp().globalData.saasAgent\n\t\t\t\t},\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tlet attr,\n\t\t\t\t\t\tadd = [];\n\t\t\t\t\tattr = [...that.query];\n\t\t\t\t\tlet evaled = [];\n\t\t\t\t\tattr.map(val => {\n\t\t\t\t\t\tevaled.push(val.upImg);\n\t\t\t\t\t});\n\t\t\t\t\tevaled[goodsIndex].push(that.$domain + JSON.parse(res.data).fileUrl);\n\n\t\t\t\t\tadd = JSON.parse(JSON.stringify(evaled[goodsIndex]));\n\t\t\t\t\tevaled[goodsIndex] = add;\n\t\t\t\t\tattr.map(val => {\n\t\t\t\t\t\tdelete val.upImg;\n\t\t\t\t\t});\n\t\t\t\t\tattr.map((val, k) => {\n\t\t\t\t\t\tval.upImg = evaled[k];\n\t\t\t\t\t});\n\t\t\t\t\tthat.query = attr;\n\t\t\t\t\tthat.query[goodsIndex].evaluateGoodsImgs.push(JSON.parse(res.data).fileUrl);\n\t\t\t\t\t$storage.set('evaluateScopeList', that.query);\n\t\t\t\t},\n\t\t\t\tfail: function(res) {\n\t\t\t\t\twx.hideLoading();\n\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t//title: '提示',\n\t\t\t\t\t\tcontent: '上传图片失败',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: function(res) {}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\ti++;\n\t\t\t\t\tif (i == upLength) {\n\t\t\t\t\t\twx.hideLoading();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthat.upLoad(imgPath, i, upLength);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\ticonShow(index, goodsIndex) {\n\t\t\tlet attr,\n\t\t\t\tadd = [];\n\t\t\tattr = [...$storage.get('evaluateScopeList')];\n\t\t\tlet evaled = [];\n\t\t\tattr.map(val => {\n\t\t\t\tevaled.push(val.evaluateScopeList);\n\t\t\t});\n\n\t\t\tadd = JSON.parse(JSON.stringify(evaled[goodsIndex]));\n\t\t\tif (add[index].baseColor) {\n\t\t\t\tadd.map((val, k) => {\n\t\t\t\t\tif (k > index) {\n\t\t\t\t\t\tval.baseColor = '';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tadd.map((val, k) => {\n\t\t\t\t\tif (k <= index) {\n\t\t\t\t\t\tval.baseColor = this.baseColor;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tevaled[goodsIndex] = add;\n\t\t\tattr.map(val => {\n\t\t\t\tdelete val.evaluateScopeList;\n\t\t\t});\n\t\t\tattr.map((val, k) => {\n\t\t\t\tval.evaluateScopeList = evaled[k];\n\t\t\t});\n\t\t\tthis.query = attr;\n\t\t\t$storage.set('evaluateScopeList', this.query);\n\t\t},\n\t\taddSubmit() {\n\t\t\tthis.query.map((val, k) => {\n\t\t\t\tval.evaluateGoodsImgs = val.evaluateGoodsImgs ? val.evaluateGoodsImgs.join(',') : '';\n\t\t\t\tval.contractAppraise = 1;\n\t\t\t\tthis.query[k].evaluateScopeList = val.evaluateScopeList.filter(v => v.baseColor === this.baseColor);\n\t\t\t});\n\t\t\t//let resList = this.templateValuesReList.filter((val)=>val.baseColor == this.baseColor)\n\t\t\t//resList.map(val=>delete val.baseColor)\n\t\t\t//this.query.evaluateScopeList = resList\n\t\t\t//this.query.evaluateGoodsImgs = this.evaluateGoodsImgs.join(',')\n\t\t\t//this.query.evaluateGoodsContent = this.evaluateGoodsContent\n\t\t\t//this.query.contractAppraise =1;//1评价，0 未评价\n\t\t\tlet params = [];\n\t\t\tlet shops = {\n\t\t\t\tcontractBillcode: this.query[0].contractBillcode,\n\t\t\t\tmemberBcode: this.query[0].memberBcode,\n\t\t\t\tmemberBname: this.query[0].memberBname,\n\t\t\t\tmemberCode: this.query[0].memberCode,\n\t\t\t\tmemberName: this.query[0].memberName\n\t\t\t};\n\t\t\tconsole.log(this.query);\n\t\t\tconsole.log(shops);\n\t\t\t//params.push(this.query)\n\t\t\tlet isNullResolve = false;\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tresolve();\n\t\t\t\tthis.query.map((val, k) => {\n\t\t\t\t\tif (this.query[k].evaluateScopeList.length > 0) {\n\t\t\t\t\t\tisNullResolve = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).then(() => {\n\t\t\t\tif (isNullResolve) {\n\t\t\t\t\tshops.paramStr = JSON.stringify(this.query);\n\t\t\t\t\thttp.post(saveEvaluateShop, shops);\n\n\t\t\t\t\thttp.post(saveEvaluateGoods, { paramStr: JSON.stringify(this.query) })\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t$message.alert('评价成功');\r\n\t\t\t\t\t\t\t$router.back();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t// $router.replace(this.orderUrl, { dataState: 0 });\n\t\t\t\t\t\t\t// $router.replace('order_modules/o2o_order/index', { dataState: 0 });\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$message.alert('商品星星评分要完整');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import '../../../common/css/common.less';\n.evaluateList {\n\tbackground: @white-color;\n\twidth: 100%;\n\tpadding-top: 90rpx;\n\tul {\n\t\tli {\n\t\t\tdisplay: flex;\n\t\t\talign-items: cener;\n\t\t\tjustify-content: flex-start;\n\t\t\tpadding: 34rpx 30rpx;\n\t\t\tborder-bottom: 1rpx solid #eee;\n\t\t\timg {\n\t\t\t\twidth: 110rpx;\n\t\t\t\theight: 110rpx;\n\t\t\t\tmargin-right: 28rpx;\n\t\t\t}\n\t\t\th3 {\n\t\t\t\tfont-size: @big-title;\n\t\t\t\tcolor: #212121;\n\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t}\n\t\t\tp {\n\t\t\t\ti {\n\t\t\t\t\tfloat: left;\n\t\t\t\t\tmargin-right: 26rpx;\n\t\t\t\t\tcolor: #efefef;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t&-text {\n\t\tpadding: 30rpx 30rpx 40rpx;\n\t\tborder-bottom: 1rpx solid #eee;\n\t\ttextarea {\n\t\t\theight: 170rpx;\n\t\t\twidth: 100%;\n\t\t\tcolor: #ccc;\n\t\t}\n\t\t&-img {\n\t\t\th4 {\n\t\t\t\tmargin: 30rpx 0;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tpadding-left: 30rpx;\n\t\t\t}\n\t\t\t&-box {\n\t\t\t\t.show-apply-img {\n\t\t\t\t\tpadding: 20rpx 0;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tzoom: 1;\n\t\t\t\t\tdd {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\twidth: 154rpx;\n\t\t\t\t\t\theight: 154rpx;\n\t\t\t\t\t\tfloat: left;\n\t\t\t\t\t\tmargin: 0 10rpx 30rpx;\n\t\t\t\t\t\t&:first-child {\n\t\t\t\t\t\t\tmargin: 0 10rpx 30rpx 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&:nth-child(4) {\n\t\t\t\t\t\t\tmargin: 0 0 30rpx 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.dd-img {\n\t\t\t\t\t\t\twidth: 150rpx;\n\t\t\t\t\t\t\theight: 150rpx;\n\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\t.icon-delete {\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tright: -15rpx;\n\t\t\t\t\t\t\t\ttop: -15rpx;\n\t\t\t\t\t\t\t\tz-index: 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\timg {\n\t\t\t\t\t\t\t\twidth: 150rpx;\n\t\t\t\t\t\t\t\theight: 150rpx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tform {\n\t\t\t\t\t\twidth: 150rpx;\n\t\t\t\t\t\theight: 150rpx;\n\t\t\t\t\t\tbackground: #fff;\n\t\t\t\t\t\tborder: 1px dashed #d2d2d2;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\ti {\n\t\t\t\t\t\t\tfont-size: 57rpx;\n\t\t\t\t\t\t\tcolor: #d2d2d2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tp {\n\t\t\t\t\t\t\tcolor: #d2d2d2;\n\t\t\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinput[type='file'] {\n\t\t\t\t\t\t\twidth: 150rpx;\n\t\t\t\t\t\t\theight: 150rpx;\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\tz-index: 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t&-addSubmit {\n\t\twidth: 590rpx;\n\t\theight: 84rpx;\n\t\tmargin: 132rpx auto 0;\n\t\t// background: #b79f77;\n\t\tline-height: 84rpx;\n\t\ttext-align: center;\n\t\tcolor: @white-color;\n\t\tborder-radius: 6rpx;\n\t\tfont-size: 28rpx;\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=92bb8c4a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=92bb8c4a&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610694826561\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}