<view class="shopcart _div data-v-24d2a72e" style="{{'height:'+(shopIdAttr.length<3?'100%':'auto')+';'}}"><common-header vue-id="75813c86-1" title="{{title}}" leftIcon="{{leftIcon}}" rightIcon="{{rightIcon}}" class="data-v-24d2a72e" bind:__l="__l"></common-header><block wx:if="{{listItems.length>0}}"><block wx:if="{{delStatus}}"><view data-event-opts="{{[['tap',[['edited',['$event']]]]]}}" class="shopcart-save _div data-v-24d2a72e" bindtap="__e">编辑</view></block><block wx:else><view data-event-opts="{{[['tap',[['finished',['$event']]]]]}}" class="shopcart-save _div data-v-24d2a72e" bindtap="__e">完成</view></block></block><block wx:if="{{listItems.length>0}}"><view class="_ul data-v-24d2a72e"><block wx:for="{{listItems}}" wx:for-item="listItem" wx:for-index="listIndex" wx:key="listIndex"><view class="_li data-v-24d2a72e"><block wx:for="{{listItem.shoppingpackageList}}" wx:for-item="list" wx:for-index="liIndex" wx:key="liIndex"><view class="_div data-v-24d2a72e"><view data-event-opts="{{[['tap',[['titCheckBox',['$0',liIndex],[[['listItems','',listIndex],['shoppingpackageList','',liIndex]]]]]]]}}" class="memberTit _div data-v-24d2a72e" bindtap="__e"><block wx:if="{{list.titChecked==0}}"><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+(baseColor)+';'}}"></view></block><block wx:else><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+('#ededed')+';'}}"></view></block>{{''+list.memberName+''}}</view><view class="list_li _div data-v-24d2a72e"><view class="list_pm list_p _div data-v-24d2a72e"><view hidden="{{!(list.promotionCode)}}" class="_div data-v-24d2a72e"><view class="tit _div data-v-24d2a72e"><view style="{{'background:'+(baseColor)+';'}}" class="_p data-v-24d2a72e">{{list.pbName}}</view><label class="f-s22 _span data-v-24d2a72e">{{''+(list.promotionName?list.promotionName:'')+(list.disMsg?list.disMsg:'')+(list.disNextMsg?list.disNextMsg:'')+''}}</label></view></view><block wx:for="{{list.shoppingGoodsList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="itemGoods _div data-v-24d2a72e"><view class="item-container _div data-v-24d2a72e"><view data-event-opts="{{[['tap',[['listCheckBox',['$0'],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" class="list-l _div data-v-24d2a72e" catchtap="__e"><block wx:if="{{item.shoppingGoodsCheck==0}}"><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+(baseColor)+';'}}"></view></block><block wx:else><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+('#ededed')+';'}}"></view></block></view><view data-event-opts="{{[['tap',[['goToGoodsDetail',['$0'],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" class="list-img _div data-v-24d2a72e" catchtap="__e"><image src="{{item.dataPic||userImgurl}}" class="_img data-v-24d2a72e"></image><block wx:if="{{item.dataState==2}}"><label class="_span data-v-24d2a72e">已下架</label></block><block wx:if="{{item.dataState==3}}"><label class="_span data-v-24d2a72e">已失效</label></block><block wx:if="{{item.dataState==1}}"><label class="_span data-v-24d2a72e">库存不足</label></block></view><view class="list-r _div data-v-24d2a72e" style="{{'color:'+(item.dataState!==0?'#ccc':'')+';'}}"><view data-event-opts="{{[['tap',[['goToGoodsDetail',['$0'],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" catchtap="__e" class="_p data-v-24d2a72e">{{item.goodsName}}</view><view data-event-opts="{{[['tap',[['goToGoodsDetail',['$0'],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" style="{{'color:'+(item.dataState!==0?'#ccc':'')+';'}}" catchtap="__e" class="_h3 data-v-24d2a72e">{{''+item.skuName+"*"+item.goodsCamount+''}}</view><view class="list-count _div data-v-24d2a72e"><view style="{{'color:'+(item.dataState!==0?'#ccc':'#d66377')+';'}}" class="_div data-v-24d2a72e">{{''+unitPrice.obpay+item.pricesetNprice+unitPrice.mapay+''}}</view><view class="list-add _div data-v-24d2a72e"><view data-event-opts="{{[['tap',[['subtract',['$0',index],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" catchtap="__e" class="_div data-v-24d2a72e"><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+(item.goodsCamount&&item.goodsCamount>0&&item.goodsCamount<=item.goodsMinnum?'#ccc':'')+';'}}"></view></view><view class="_div data-v-24d2a72e"><input type="text" disabled="{{true}}" data-event-opts="{{[['input',[['__set_model',['$0','goodsCamount','$event',[]],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" value="{{item.goodsCamount}}" bindinput="__e" class="data-v-24d2a72e"/></view><view data-event-opts="{{[['tap',[['add',['$0',index],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]]]]]]]}}" catchtap="__e" class="_div data-v-24d2a72e"><view class="iconfont _i data-v-24d2a72e"></view></view></view></view></view></view><view hidden="{{!(list.promotionCode&&item.pmPromotionList&&item.pmPromotionList.length>0)}}" class="_div data-v-24d2a72e"><view class="updatePm _div data-v-24d2a72e"><view class="_p data-v-24d2a72e"><view class="_i data-v-24d2a72e">促销</view>{{''+list.promotionName+''}}</view><label data-event-opts="{{[['tap',[['updateAction',[index,'$0','$1'],[[['listItems','',listIndex],['shoppingpackageList','',liIndex],['shoppingGoodsList','',index]],[['listItems','',listIndex],['shoppingpackageList','',liIndex,'promotionName']]]]]]]}}" bindtap="__e" class="_span data-v-24d2a72e">修改</label></view></view></view></block></view></view></view></block></view></block></view></block><block wx:else><view class="shopcart-nulls _div data-v-24d2a72e"><image src="{{nullImg}}" class="_img data-v-24d2a72e"></image></view></block><block wx:if="{{listItems.length>0}}"><view class="_div data-v-24d2a72e"><view class="shopcart-count _div data-v-24d2a72e"><view data-event-opts="{{[['tap',[['countCheckBox',['$event']]]]]}}" bindtap="__e" class="_div data-v-24d2a72e"><block wx:if="{{countChecked}}"><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+(baseColor)+';'}}"></view></block><block wx:else><view class="iconfont _i data-v-24d2a72e" style="{{'color:'+('#ededed')+';'}}"></view></block>全选</view><block wx:if="{{delStatus}}"><view class="addCount _div data-v-24d2a72e">总计：<block wx:if="{{totalPointPrice>0}}"><view style="{{'color:'+(baseColor)+';'}}" class="_i data-v-24d2a72e">{{unitPrice.obpay+totalPointPrice+unitPrice.mapay}}</view></block><block wx:if="{{totalPrice&&totalPointPrice}}"><view style="{{'color:'+(baseColor)+';'}}" class="_i data-v-24d2a72e">+</view></block><block wx:if="{{totalPrice>0}}"><view style="{{'color:'+(baseColor)+';'}}" class="_i data-v-24d2a72e">{{unitPrice.obpay+totalPrice+unitPrice.mapay}}</view></block><block wx:if="{{totalPrice==0&&totalPointPrice==0}}"><view style="{{'color:'+(baseColor)+';'}}" class="_i data-v-24d2a72e">{{unitPrice.obpay+"0.00"+unitPrice.mapay}}</view></block><view data-event-opts="{{[['tap',[['getTotalPrice',['$event']]]]]}}" class="buy-btn _div data-v-24d2a72e" style="{{'background:'+(baseColor)+';'}}" bindtap="__e">去结算</view></view></block><block wx:else><view data-event-opts="{{[['tap',[['delCartShopping',['$event']]]]]}}" class="del _div data-v-24d2a72e" style="{{'color:'+(baseColor)+';'+('border-color:'+(baseColor)+';')}}" bindtap="__e">删除</view></block></view></view></block><vue-tab-bar vue-id="75813c86-2" selectNavIndex="{{selectNavIndex}}" baseColor="{{baseColor}}" footerMenu="{{footerMenu}}" class="data-v-24d2a72e" bind:__l="__l"></vue-tab-bar><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" hidden="{{!(isShow)}}" class="shopcart-screenLeft _div data-v-24d2a72e" bindtap="__e"></view><view hidden="{{!(isShow)}}" class="shopcart-preferential _div data-v-24d2a72e"><view class="shopcart-preferential-con _div data-v-24d2a72e"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" bindtap="__e" class="_p data-v-24d2a72e">修改促销<view class="iconfont _i data-v-24d2a72e"></view></view><view class="_ol data-v-24d2a72e"><block wx:for="{{options}}" wx:for-item="op" wx:for-index="opIndex" wx:key="opIndex"><view class="_li data-v-24d2a72e"><view class="_h3 data-v-24d2a72e">{{''+op.promotionName+''}}<view data-event-opts="{{[['tap',[['checkPmPromotion',['$0'],[[['options','',opIndex]]]]]]]}}" class="iconfont _i data-v-24d2a72e" style="{{'color:'+(optionsIndex===opIndex?baseColor:'#c6c6c6')+';'}}" bindtap="__e">{{''+(optionsIndex===opIndex?'':'')+''}}</view></view></view></block></view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="pre-btn _div data-v-24d2a72e" style="{{'background:'+(baseColor)+';'}}" bindtap="__e">确认</view></view></view></view>